<!-- book-search.html -->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>图书搜索</title>
    <!-- 引入Vue.js和Element UI的CDN链接 -->
    <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
</head>
<body>

<div id="app">
    <el-container>
        <el-main>
            <el-input v-model="searchKeyword" placeholder="请输入关键字"></el-input>
            <el-button @click="searchBooks">搜索</el-button>
            <!-- 显示搜索结果的表格 -->
            <el-table :data="bookList" style="width: 100%">
                <el-table-column prop="bookName" label="书本名称"></el-table-column>
                <el-table-column prop="publisher" label="出版社"></el-table-column>
                <el-table-column prop="publishTime" label="出版时间"></el-table-column>
                <!-- 其他列... -->
                <el-table-column label="操作">
                    <template slot-scope="scope">
                        <el-button @click="showBookDetails(scope.row)">详情</el-button>
                    </template>
                </el-table-column>
            </el-table>
        </el-main>
    </el-container>
</div>

<script src="https://cdn.jsdelivr.net/npm/vue@2"></script>
<script src="https://unpkg.com/element-ui/lib/index.js"></script>
<!-- 引入 Axios -->
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

<script>
    new Vue({
        el: '#app',
        data() {
            return {
                searchKeyword: '',
                bookList: []  // 存放搜索结果
            };
        },
        methods: {
            searchBooks() {

                // 发送搜索请求到后端
                axios.get(`http://localhost:8080/api/books/search?query=${this.searchKeyword}`)
                    .then(response => {
                        const result = response.data;

                        if (result.code === 0) {
                            // 假设 result.data 包含图书列表
                            const books = result.data;

                            this.bookList = books;

                            // 根据您的需求在此添加其他逻辑
                        } else {
                            // 显示错误消息
                            this.$message.error('搜索图书失败：' + result.message);
                        }
                    })
                    .catch(error => {
                        console.error('搜索图书时出错：', error);
                        // 处理错误，显示消息等。
                    });
            },
            showBookDetails(book) {
                // 跳转到书本详细信息页面，你可以使用window.location.href或Vue Router进行页面跳转
            }
        }
    });
</script>

</body>
</html>
